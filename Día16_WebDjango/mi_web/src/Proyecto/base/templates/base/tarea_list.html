{% extends 'base/principal.html' %}
{% block content %}

<div class="barra-superior">
    <div>
        <h1>Hola {{request.user|title}}</h1>
        <h3 style="margin:0">Tienes <i>{{count}}</i> tarea{{count|pluralize}} incompleta{{count|pluralize}}</h3>
    </div>
    {% if request.user.is_authenticated %}
    <!-- Muestra el nombre de usuario -->
    <!--<p>{{request.user}}</p>-->
    <!-- No se puede mandar como href pq es un get, y no django5+ no acepta get, acepta post -->
    <!-- <a href="{% url 'logout' %}">Salir</a> -->
    <form method="POST" action="{% url 'logout' %}" style="display:inline;">
        {% csrf_token %}
        <button type="submit">Salir</button>
    </form>
    {% else %}
        <a href="{% url 'login' %}">Ingresa</a>
    {% endif %}
</div>

<!-- class se repite para varios elementos, id se usa solo una vez -->
<div id="agregar-buscar">
    <form method="GET" style="margin-top:20px;display:flex;">
        <input type="text" name="area-buscar" value="{{valor_buscado}}">
        <input class="boton" type="submit" value="Buscar">
    </form>
    <a id="enlace-agregar" href="{% url 'crear-tarea' %}"> &#x2719; </a>

</div>


<div class="tareas">
    {% for tarea in tareas %}
    <div class="tarea">
        {% if tarea.completada %}
        <div class = "titulo-tarea">
            <div class = "icono-tarea-completa"></div>
            <i><s><a href="{%url 'editar-tarea' tarea.id %}">{{tarea}}</a></s></i>
            
        </div>
        <a class = "eliminar" href="{%url 'eliminar-tarea' tarea.id%}">&#x2717;</a>
        {%else%}
        <div class = "titulo-tarea">
            <div class = "icono-tarea-incompleta"></div>
            <a href="{%url 'editar-tarea' tarea.id %}">{{tarea}}</a>
        </div>
        <a class = "eliminar" href="{%url 'eliminar-tarea' tarea.id%}">&#x2717;</a>
        {% endif %}

    </div>

    <!-- En caso de que la BD esté vacía -->
    {% empty %}
    <h2> No hay elementos en la lista de tareas </h2>
    {% endfor %}

</div>
{% endblock content %}
<!-- 
<table>
    <-- Nombre x columna --
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Enlace a Tarea</th>
            <th>Editar Tarea</th>
            <th>Eliminar</th>
        </tr>
    </thead>

    <-- Cuerpo de la tabla --
    <tbody>
        <-- Recorre los registros en la base de datos Tarea --
        {% for tarea in tareas %}
        <-- <tr> es el cuerpo de la tabla -> td es lo que escribo en cada columna --
        <tr>
            <td>{{ tarea.titulo }}</td>
            <-- url 'nameUrl' <CosaConcatenada>. En este caso concatena 'detalle', que es el name asociado a la url detalle-tarea, con tarea.id --
            <--<td><a href="{%url 'detalle' tarea.id%}">Ver</a></td> --
            <td><a href="{%url 'editar-tarea' tarea.id%}">Editar</a></td>
            <td><a href="{%url 'eliminar-tarea' tarea.id%}">Eliminar</a></td>
        </tr>

        <-- En caso de que la BD esté vacía --
        {% empty %}
        <h2> No hay elementos en la lista de tareas </h2>
        {% endfor %}
    </tbody>
</table>
-->

        
